<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>时间分片渲染</title>
</head>
<body>
<ul id="container"></ul>
</body>
<script>
    // 记录任务开始时间
    let now = Date.now();
    // 插入十万条数据
    let total = 10000;
    let dom = document.getElementById('container')
    function add() {
        requestAnimationFrame(function () {
            let frame = document.createDocumentFragment();
            for(let i = 0; i < 20 && total >0; i++) {
                let li = document.createElement('li');
                li.innerText = total;
                frame.appendChild(li)
                total--;
            }
            dom.appendChild(frame);
            add();
        })
    }
    add();
</script>
</html>
